<div class="admin-form-page">
  <div class="admin-page-header">
    <h1>Editar Clase</h1>
    <%= link_to "Volver", management_classes_path, class: "btn btn-outline" %>
  </div>

  <div class="form-container">
    <%= form_with model: @pilates_class, url: management_class_path(@pilates_class), scope: :pilates_class, method: :patch, local: true, class: "admin-form" do |f| %>
      <%= render "shared/error_messages", resource: @pilates_class %>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :name, "Nombre de la Clase" %>
          <%= f.text_field :name, class: "form-control" %>
          <small class="form-hint">Podés dejarlo vacío para que se autogenere</small>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :level, "Nivel" %>
          <%= f.select :level, options_for_select([
            ['Inicial', 'inicial'],
            ['Básico', 'basic'],
            ['Intermedio', 'intermediate'],
            ['Avanzado', 'advanced']
          ], @pilates_class.level), {}, { class: "form-control" } %>
        </div>

        <div class="form-group">
          <%= f.label :class_type, "Tipo de Clase" %>
          <%= f.select :class_type, options_for_select([
            ['Grupal', 'grupal'],
            ['Privada', 'privada']
          ], @pilates_class.class_type), {}, { class: "form-control" } %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :room_id, "Sala" %>
          <%= f.select :room_id, options_from_collection_for_select(@rooms, :id, :name, @pilates_class.room_id), 
              {}, { class: "form-control" } %>
        </div>

        <div class="form-group">
          <%= f.label :instructor_id, "Instructor / Profesor" %>
          <%= f.select :instructor_id, options_from_collection_for_select(@instructors, :id, :name, @pilates_class.instructor_id), 
              {}, { class: "form-control" } %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :start_time, "Día y horario" %>
          <%= f.datetime_local_field :start_time, class: "form-control", value: @pilates_class.start_time&.strftime("%Y-%m-%dT%H:%M") %>
        </div>

        <div class="form-group">
          <%= f.label :end_time, "Hora de fin (opcional)" %>
          <%= f.datetime_local_field :end_time, class: "form-control", value: @pilates_class.end_time&.strftime("%Y-%m-%dT%H:%M") %>
          <small class="form-hint">Si lo dejás vacío, se calcula automáticamente (+1 hora)</small>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= f.label :max_capacity, "Cupo" %>
          <%= f.number_field :max_capacity, class: "form-control", min: 1 %>
          <small class="form-hint">Si es privada, el sistema fuerza cupo = 1</small>
        </div>
      </div>

      <div class="form-actions">
        <%= f.submit "Actualizar Clase", class: "btn btn-primary btn-large" %>
        <%= link_to "Cancelar", management_classes_path, class: "btn btn-outline" %>
      </div>
    <% end %>
  </div>
</div>
