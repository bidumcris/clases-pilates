<div class="admin-dashboard">
  <div class="admin-header">
    <%= image_tag "energia-pilates/1. logotipo/EP_logotipo 1.png", alt: "Energ√≠a Pilates", class: "admin-logo" %>
    <h1>Panel de Gesti√≥n</h1>
    <p class="admin-subtitle">Administraci√≥n de clases, alumnos y solicitudes</p>
  </div>

  <!-- Estad√≠sticas R√°pidas -->
  <div class="admin-stats">
    <div class="stat-card">
      <div class="stat-number"><%= @total_students %></div>
      <div class="stat-label">Alumnos</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @active_classes_today %></div>
      <div class="stat-label">Clases Hoy</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @pending_requests.count %></div>
      <div class="stat-label">Solicitudes Pendientes</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @upcoming_classes.count %></div>
      <div class="stat-label">Pr√≥ximas Clases</div>
    </div>
  </div>

  <!-- Accesos R√°pidos -->
  <div class="admin-quick-access">
    <h2>Accesos R√°pidos</h2>
    <div class="quick-access-grid">
      <%= link_to management_classes_path, class: "quick-access-card" do %>
        <div class="card-icon">üìÖ</div>
        <h3>Gestionar Clases</h3>
        <p>Crear, editar y eliminar clases por sala y horario</p>
      <% end %>

      <%= link_to management_students_path, class: "quick-access-card" do %>
        <div class="card-icon">üë•</div>
        <h3>Gestionar Alumnos</h3>
        <p>Ver alumnos, cambiar tipo de clase, agregar cr√©ditos</p>
      <% end %>

      <% if current_user.admin? %>
        <%= link_to management_cashbox_path, class: "quick-access-card" do %>
          <div class="card-icon">üíµ</div>
          <h3>Caja</h3>
          <p>Control de pagos por m√©todo y per√≠odo</p>
        <% end %>

        <%= link_to management_credits_path, class: "quick-access-card" do %>
          <div class="card-icon">üéüÔ∏è</div>
          <h3>Cr√©ditos</h3>
          <p>Asignar cr√©ditos y ver historial</p>
        <% end %>
      <% end %>

      <%= link_to admin_root_path, class: "quick-access-card" do %>
        <div class="card-icon">üìä</div>
        <h3>Panel Avanzado</h3>
        <p>Acceso a ActiveAdmin para gesti√≥n t√©cnica</p>
      <% end %>
    </div>
  </div>

  <!-- Pr√≥ximas Clases -->
  <div class="admin-section">
    <h2>Pr√≥ximas Clases</h2>
    <% if @upcoming_classes.any? %>
      <table class="admin-table">
        <thead>
          <tr>
            <th>Fecha/Hora</th>
            <th>Clase</th>
            <th>Sala</th>
            <th>Instructor</th>
            <th>Nivel</th>
            <th>Tipo</th>
            <th>Disponibilidad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% @upcoming_classes.each do |pilates_class| %>
            <tr>
              <td><%= pilates_class.start_time.strftime("%d/%m/%Y %H:%M") %></td>
              <td><%= pilates_class.name %></td>
              <td><%= pilates_class.room.name %></td>
              <td><%= pilates_class.instructor.name %></td>
              <td><span class="badge badge-level"><%= pilates_class.level.humanize %></span></td>
              <td>
                <span class="badge <%= pilates_class.privada? ? 'badge-warning' : 'badge-success' %>">
                  <%= pilates_class.class_type.humanize %>
                </span>
              </td>
              <td><%= pilates_class.available_spots %>/<%= pilates_class.max_capacity %></td>
              <td>
                <%= link_to "Editar", edit_management_class_path(pilates_class), class: "btn btn-sm btn-primary" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>No hay clases pr√≥ximas</p>
    <% end %>
  </div>

  <%# Bloque "Solicitudes Pendientes" oculto por pedido (la gesti√≥n sigue en /management/requests) %>
</div>

