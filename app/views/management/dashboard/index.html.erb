<div class="admin-dashboard">
  <div class="admin-header">
    <%= image_tag "energia-pilates/1. logotipo/EP_logotipo 1.png", alt: "EnergÃ­a Pilates", class: "admin-logo" %>
    <h1>Panel de GestiÃ³n</h1>
    <p class="admin-subtitle">AdministraciÃ³n de clases, alumnos y solicitudes</p>
  </div>

  <!-- EstadÃ­sticas RÃ¡pidas -->
  <div class="admin-stats">
    <div class="stat-card">
      <div class="stat-number"><%= @total_students %></div>
      <div class="stat-label">Alumnos</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @active_classes_today %></div>
      <div class="stat-label">Clases Hoy</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @pending_requests.count %></div>
      <div class="stat-label">Solicitudes Pendientes</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @upcoming_classes.count %></div>
      <div class="stat-label">PrÃ³ximas Clases</div>
    </div>
  </div>

  <!-- Accesos RÃ¡pidos -->
  <div class="admin-quick-access">
    <h2>Accesos RÃ¡pidos</h2>
    <div class="quick-access-grid">
      <%= link_to management_classes_path, class: "quick-access-card" do %>
        <div class="card-icon">ğŸ“…</div>
        <h3>Gestionar Clases</h3>
        <p>Crear, editar y eliminar clases por sala y horario</p>
      <% end %>

      <%= link_to management_students_path, class: "quick-access-card" do %>
        <div class="card-icon">ğŸ‘¥</div>
        <h3>Gestionar Alumnos</h3>
        <p>Ver alumnos, cambiar tipo de clase, agregar crÃ©ditos</p>
      <% end %>

      <%= link_to management_requests_path, class: "quick-access-card" do %>
        <div class="card-icon">ğŸ””</div>
        <h3>Solicitudes</h3>
        <p>Revisar y aprobar/rechazar solicitudes</p>
      <% end %>

      <% if current_user.admin? %>
        <%= link_to management_cashbox_path, class: "quick-access-card" do %>
          <div class="card-icon">ğŸ’µ</div>
          <h3>Caja</h3>
          <p>Control de pagos por mÃ©todo y perÃ­odo</p>
        <% end %>

        <%= link_to management_credits_path, class: "quick-access-card" do %>
          <div class="card-icon">ğŸŸï¸</div>
          <h3>CrÃ©ditos</h3>
          <p>Asignar crÃ©ditos y ver historial</p>
        <% end %>
      <% end %>

      <%= link_to admin_root_path, class: "quick-access-card" do %>
        <div class="card-icon">ğŸ“Š</div>
        <h3>Panel Avanzado</h3>
        <p>Acceso a ActiveAdmin para gestiÃ³n tÃ©cnica</p>
      <% end %>
    </div>
  </div>

  <!-- PrÃ³ximas Clases -->
  <div class="admin-section">
    <h2>PrÃ³ximas Clases</h2>
    <% if @upcoming_classes.any? %>
      <table class="admin-table">
        <thead>
          <tr>
            <th>Fecha/Hora</th>
            <th>Clase</th>
            <th>Sala</th>
            <th>Instructor</th>
            <th>Nivel</th>
            <th>Tipo</th>
            <th>Disponibilidad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% @upcoming_classes.each do |pilates_class| %>
            <tr>
              <td><%= pilates_class.start_time.strftime("%d/%m/%Y %H:%M") %></td>
              <td><%= pilates_class.name %></td>
              <td><%= pilates_class.room.name %></td>
              <td><%= pilates_class.instructor.name %></td>
              <td><span class="badge badge-level"><%= pilates_class.level.humanize %></span></td>
              <td>
                <span class="badge <%= pilates_class.privada? ? 'badge-warning' : 'badge-success' %>">
                  <%= pilates_class.class_type.humanize %>
                </span>
              </td>
              <td><%= pilates_class.available_spots %>/<%= pilates_class.max_capacity %></td>
              <td>
                <%= link_to "Editar", edit_management_class_path(pilates_class), class: "btn btn-sm btn-primary" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>No hay clases prÃ³ximas</p>
    <% end %>
  </div>

  <!-- Solicitudes Pendientes -->
  <% if @pending_requests.any? %>
    <div class="admin-section">
      <h2>Solicitudes Pendientes</h2>
      <div class="requests-list">
        <% @pending_requests.each do |request| %>
          <div class="request-card">
            <div class="request-info">
              <strong><%= request.user.email %></strong>
              <p><%= request.pilates_class.name %> - <%= request.pilates_class.start_time.strftime("%d/%m/%Y %H:%M") %></p>
              <span class="request-type"><%= request.request_type.humanize %></span>
            </div>
            <div class="request-actions">
              <%= button_to "Aprobar", approve_management_request_path(request), method: :post, class: "btn btn-success" %>
              <%= button_to "Rechazar", reject_management_request_path(request), method: :post, class: "btn btn-danger" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

